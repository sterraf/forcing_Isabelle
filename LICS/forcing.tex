%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%          
\section{Forcing}
Given a ctm $M$, and an $M$-generic filter $G\sbq\PP$, the Forcing
Theorems relate satisfaction of a formula 
$\phi$ in the generic extension $M[G]$ to the satisfaction of another
formula $\phi'$ in $M$. The map $\phi\mapsto\phi'$ is defined by
recursion on 
the structure of $\phi$. The fact that this map works (in particular,
in order to show that $M[G]\models\ZFC$), we must use the fact that
$M\models\ZFC$. Since we can only assert the latter using internalized
formulas, the aformentioned map will be defined as a function from the
set \formula{} into itself. 

Up to this point, the main reason for working with internalized
versions is that  it is not possible to do recursion with formulas of
type $\tyo$ (i.e., the formulas in the first-order logic of
Isabelle/ZF).

We will now make more precise the definition of the map
$\phi\mapsto\phi'$ and how it relates satisfaction in $M$ to that in
$M[G]$. Actually, if the formula $\phi$ has $n$ free variables,
$\phi'$ will have $n+4$ free variables, where the first four account
for the forcing notion and a particular condition. If
$\phi=\phi(x_1,\dots,x_n)$, the standard notation for $\phi'$ is
\[
p\forces_{\PP,\leq,\1}^* \phi(t_1,\dots,t_n).
\]
Here, $\PP,\leq,\1,$ and $p\in\PP$ are the extra parameters. 
%% For the
%% time being, we just consider $\tau_1,\dots,\tau_n$ to be ordinary
%% variables. 
Given $\quine\phi\in\formula$, we will write this  in
Isabelle/ZF by using  
\[
\forceisa(\quine\phi,\PP,\leq,\1,p)
\]
Afterwards, the \emph{forcing relation} $\forces$ is defined by
relativizing/interpreting $\forces^*$ in a ctm $M$, for fixed
$\lb\PP,\leq,\1\rb\in M$:
\[
p\forces \phi(t_1,\dots,t_n) \defi 
\bigl(p\forces_{\PP,\leq,\1}^* \phi(t_1,\dots,t_n)\bigr)^M\!.
\]

\subsection{The fundamental theorems}
These are stated as two lemmas: \emph{Truth} and
\emph{Definability}. The second one ``simply'' says that the forcing
relation is definable. The previous recursive construction amounts to
that. The Truth Lemma states that the forcing relation indeed relates
satisfaction in $M[G]$ to that in $M$. 
\begin{lemma}[Truth Lemma]\label{lem:truth-lemma}
  Let $M$ be a ctm of $\ZFC$, $\lb\PP,\leq,\1\rb$ a forcing notion
  in $M$, $p\in\PP$, and $\phi(x_1,\dots,x_n)$ a formula in the
  language of set 
  theory with all free variables displayed. Then the
  following are equivalent, for all $\tau_1,\dots,\tau_n\in M$: 
  \begin{enumerate}
  \item $M[G],[\val(G,\tau_0),\dots,\val(G,\tau_n)]
  \models\phi(x_0,\dots,x_n)$ for 
    all filters $G$, $M$-generic for $\PP$, such that $p\in G$.
  \item $  M,[\PP,\leq,\1,p,\tau_0,\dots,\tau_n] 
  \models\forceisa(\phi(x_4,\dots,x_{n+4}))$.
  \end{enumerate}
\end{lemma}
The proof of the Truth Lemma is by recursion in elements of
$\formula$. The following auxiliary results (adapted from
\cite[IV.2.43]{kunen2011set}) are also proved by recursion in
$\formula$.
\begin{lemma}[Strenghtening]\label{lem:strengthen} 
  Assume the same hypothesis of Lemma~\ref{lem:truth-lemma}.
  $M, [\PP,\leq,\1,p]\models\forceisa(\phi)$ and $p_1\leq p$
  implies $M, [\PP,\leq,\1,p_1]\models\forceisa(\phi)$.
\end{lemma}
\begin{lemma}[Density]\label{lem:density}
  Assume the same hypothesis of
  Lemma~\ref{lem:truth-lemma}. $M\models\forceisa(\phi,\dots)$ 
  if and only if 
  $M\models$``$\{p_1\leq p : \forceisa(\phi,\PP,\leq,\1,p_1)\}$ is
  dense below $p$.''
\end{lemma}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "Separation_In_MG"
%%% ispell-local-dictionary: "american"
%%% End: 
