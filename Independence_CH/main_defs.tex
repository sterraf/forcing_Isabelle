\section{Main definitions of the formalization}\label{sec:definitions_main}

This section, which appears almost verbatim as
the theory \theory{Definitions\_Main} in \cite{Independence_CH-AFP},
might be considered as the bare minimum reading requisite to
trust that our development indeed formalizes the theory of
forcing.

The reader trusting
all the libraries on which our development is based, might jump
directly to Section~\ref{sec:relative-arith}, which treats relative
cardinal arithmetic as implemented in
\isa{T{\kern0pt}r{\kern0pt}a{\kern0pt}n{\kern0pt}s{\kern0pt}i{\kern0pt}t{\kern0pt}i{\kern0pt}v{\kern0pt}e{\kern0pt}{\char`\_}{\kern0pt}M{\kern0pt}o{\kern0pt}d{\kern0pt}e{\kern0pt}l{\kern0pt}s{\kern0pt}}. But in case one wants to dive deeper, the
following sections treat some basic concepts of the ZF logic
(Section~\ref{sec:def-main-ZF}) and in the
\session{ZF-Constructible} library (Section~\ref{sec:def-main-relative})
on which our definitions are built.

\subsection{ZF\label{sec:def-main-ZF}%
}
For the basic logic ZF we restrict ourselves to just a few
concepts (for its axioms, consult Appendix~\ref{appendix:axioms}).
%
\begin{isabelle}%
bij{\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}\ B{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
{\isacharbraceleft}{\kern0pt}f\ {\isasymin}\ A\ {\isasymrightarrow}\ B\ {\isachardot}{\kern0pt}\ {\isasymforall}w{\isasymin}A{\isachardot}{\kern0pt}\ {\isasymforall}x{\isasymin}A{\isachardot}{\kern0pt}\ f\ {\isacharbackquote}{\kern0pt}\ w\ {\isacharequal}{\kern0pt}\ f\ {\isacharbackquote}{\kern0pt}\ x\ {\isasymlongrightarrow}\ w\ {\isacharequal}{\kern0pt}\ x{\isacharbraceright}{\kern0pt}\ {\isasyminter}\isanewline
{\isacharbraceleft}{\kern0pt}f\ {\isasymin}\ A\ {\isasymrightarrow}\ B\ {\isachardot}{\kern0pt}\ {\isasymforall}y{\isasymin}B{\isachardot}{\kern0pt}\ {\isasymexists}x{\isasymin}A{\isachardot}{\kern0pt}\ f\ {\isacharbackquote}{\kern0pt}\ x\ {\isacharequal}{\kern0pt}\ y{\isacharbraceright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
A\ {\isasymapprox}\ B\ {\isasymequiv}\ {\isasymexists}f{\isachardot}{\kern0pt}\ f\ {\isasymin}\ bij{\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}\ B{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
Transset{\isacharparenleft}{\kern0pt}i{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymforall}x{\isasymin}i{\isachardot}{\kern0pt}\ x\ {\isasymsubseteq}\ i%
\end{isabelle}%
\begin{isabelle}%
Ord{\isacharparenleft}{\kern0pt}i{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ Transset{\isacharparenleft}{\kern0pt}i{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}x{\isasymin}i{\isachardot}{\kern0pt}\ Transset{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
i\ {\isacharless}{\kern0pt}\ j\ {\isasymequiv}\ i\ {\isasymin}\ j\ {\isasymand}\ Ord{\isacharparenleft}{\kern0pt}j{\isacharparenright}{\kern0pt}\isasep\isanewline%
i\ {\isasymle}\ j\ {\isasymlongleftrightarrow}\ i\ {\isacharless}{\kern0pt}\ j\ {\isasymor}\ {\isacharparenleft}i\ {\isacharequal}{\kern0pt}\ j\ {\isasymand}\ Ord{\isacharparenleft}{\kern0pt}j{\isacharparenright}{\isacharparenright}{\kern0pt}%
\end{isabelle}%
With the concepts of empty set and successor in place,%

\begin{isabelle}
\isacommand{lemma}
\ empty{\uscore}{\kern0pt}def{\isacharprime}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isasymforall}x{\isachardot}{\kern0pt}\ x\ {\isasymnotin}\ {\isadigit{0}}{\isachardoublequoteclose}%
\isanewline
\isacommand{lemma}
\ succ{\uscore}{\kern0pt}def{\isacharprime}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}succ{\isacharparenleft}{\kern0pt}i{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ i\ {\isasymunion}\ {\isacharbraceleft}{\kern0pt}i{\isacharbraceright}{\kern0pt}{\isachardoublequoteclose}%
\end{isabelle}
%
we can define the set of natural numbers \isa{{\isasymomega}}. In the
sources, it is  defined as a fixpoint, but here we just write
its characterization as the first limit ordinal.%
\begin{isabelle}%
Ord{\isacharparenleft}{\kern0pt}{\isasymomega}{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isadigit{0}}\ {\isacharless}{\kern0pt}\ {\isasymomega}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}y{\isachardot}{\kern0pt}\ y\ {\isacharless}{\kern0pt}\ {\isasymomega}\ {\isasymlongrightarrow}\ succ{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isacharless}{\kern0pt}\ {\isasymomega}{\isacharparenright}{\kern0pt}\isasep\isanewline%
Ord{\isacharparenleft}{\kern0pt}i{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isadigit{0}}\ {\isacharless}{\kern0pt}\ i\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}y{\isachardot}{\kern0pt}\ y\ {\isacharless}{\kern0pt}\ i\ {\isasymlongrightarrow}\ succ{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\ {\isacharless}{\kern0pt}\ i{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ {\isasymomega}\ {\isasymle}\ i%
\end{isabelle}%
Then, addition and predecessor on \isa{{\isasymomega}} are inductively
characterized as follows:%
\begin{isabelle}%
m\ {\isacharplus}{\kern0pt}\isactrlsub {\isasymomega}\ succ{\isacharparenleft}{\kern0pt}n{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ succ{\isacharparenleft}{\kern0pt}m\ {\isacharplus}{\kern0pt}\isactrlsub {\isasymomega}\ n{\isacharparenright}{\kern0pt}\isasep\isanewline%
m\ {\isasymin}\ {\isasymomega}\ {\isasymLongrightarrow}\ m\ {\isacharplus}{\kern0pt}\isactrlsub {\isasymomega}\ {\isadigit{0}}\ {\isacharequal}{\kern0pt}\ m\isasep\isanewline\isanewline%
pred{\isacharparenleft}{\kern0pt}{\isadigit{0}}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isadigit{0}}\isasep\isanewline%
pred{\isacharparenleft}{\kern0pt}succ{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ y%
\end{isabelle}%
Lists on a set \isa{A} can be characterized by being
recursively generated from the empty list \isa{{\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}} and the
operation \isa{Cons} that adds a new element to the left end;
the induction theorem for them shows that the characterization is
“complete”. (Mind the
\isa{\isasymlbrakk P; Q\isasymrbrakk\ \isasymLongrightarrow\ R}
abbreviation for
\isa{P\ \isasymLongrightarrow\ Q\ \isasymLongrightarrow\ R}.)

\begin{isabelle}%
{\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}\isasep\isanewline%
{\isasymlbrakk}a\ {\isasymin}\ A{\isacharsemicolon}{\kern0pt}\ l\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}{\isasymrbrakk}\ {\isasymLongrightarrow}\ Cons{\isacharparenleft}{\kern0pt}a{\isacharcomma}{\kern0pt}\ l{\isacharparenright}{\kern0pt}\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}\isasep\isanewline\isanewline%
{\isasymlbrakk}x\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\ P{\isacharparenleft}{\kern0pt}{\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\ {\isasymAnd}a\ l{\isachardot}{\kern0pt}\ {\isasymlbrakk}a\ {\isasymin}\ A{\isacharsemicolon}{\kern0pt}\ l\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\ P{\isacharparenleft}{\kern0pt}l{\isacharparenright}{\kern0pt}{\isasymrbrakk}\ {\isasymLongrightarrow}\isanewline
\ \ P{\isacharparenleft}{\kern0pt}Cons{\isacharparenleft}{\kern0pt}a{\isacharcomma}{\kern0pt}\ l{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isasymrbrakk}
{\isasymLongrightarrow}\ P{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}%
\end{isabelle}%
Length, concatenation, and \isa{n}th element of lists are
recursively characterized as follows.%
\begin{isabelle}%
length{\isacharparenleft}{\kern0pt}{\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ {\isadigit{0}}\isasep\isanewline%
length{\isacharparenleft}{\kern0pt}Cons{\isacharparenleft}{\kern0pt}a{\isacharcomma}{\kern0pt}\ l{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ succ{\isacharparenleft}{\kern0pt}length{\isacharparenleft}{\kern0pt}l{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isasep\isanewline\isanewline%
{\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isacharat}{\kern0pt}\ ys\ {\isacharequal}{\kern0pt}\ ys\isasep\isanewline%
Cons{\isacharparenleft}{\kern0pt}a{\isacharcomma}{\kern0pt}\ l{\isacharparenright}{\kern0pt}\ {\isacharat}{\kern0pt}\ ys\ {\isacharequal}{\kern0pt}\ Cons{\isacharparenleft}{\kern0pt}a{\isacharcomma}{\kern0pt}\ l\ {\isacharat}{\kern0pt}\ ys{\isacharparenright}{\kern0pt}\isasep\isanewline\isanewline%
nth{\isacharparenleft}{\kern0pt}{\isadigit{0}}{\isacharcomma}{\kern0pt}\ Cons{\isacharparenleft}{\kern0pt}a{\isacharcomma}{\kern0pt}\ l{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ a\isasep\isanewline%
n\ {\isasymin}\ {\isasymomega}\ {\isasymLongrightarrow}\ nth{\isacharparenleft}{\kern0pt}succ{\isacharparenleft}{\kern0pt}n{\isacharparenright}{\kern0pt}{\isacharcomma}{\kern0pt}\ Cons{\isacharparenleft}{\kern0pt}a{\isacharcomma}{\kern0pt}\ l{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ nth{\isacharparenleft}{\kern0pt}n{\isacharcomma}{\kern0pt}\ l{\isacharparenright}{\kern0pt}%
\end{isabelle}%
We have the usual Haskell-like notation for iterated applications
of \isa{Cons}:%
\begin{isabelle}
\isacommand{lemma}\isamarkupfalse%
\ Cons{\isacharunderscore}{\kern0pt}app{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharbrackleft}{\kern0pt}a{\isacharcomma}{\kern0pt}b{\isacharcomma}{\kern0pt}c{\isacharbrackright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ Cons{\isacharparenleft}{\kern0pt}a{\isacharcomma}{\kern0pt}Cons{\isacharparenleft}{\kern0pt}b{\isacharcomma}{\kern0pt}Cons{\isacharparenleft}{\kern0pt}c{\isacharcomma}{\kern0pt}{\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}%
\end{isabelle}

%
%
Relative quantifiers restrict the range of the bound variable to a
class \isa{M} of type \isa{i\ {\isasymRightarrow}\ o}; that is, a truth-valued function with
set arguments.%
\begin{isabelle}
\isacommand{lemma}\isamarkupfalse%
\ {\isachardoublequoteopen}{\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ P{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymforall}x{\isachardot}{\kern0pt}\ M{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ P{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
\ \ \ \ \ \ {\isachardoublequoteopen}{\isasymexists}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ P{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymexists}x{\isachardot}{\kern0pt}\ M{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymand}\ P{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}
\end{isabelle}
%
%
Finally, a set can be viewed (“cast”) as a class using the
following function of type \isa{i\ {\isasymRightarrow}\ i\ {\isasymRightarrow}\ o}.%
\begin{isabelle}%
{\isacharparenleft}{\kern0pt}{\isacharhash}{\kern0pt}{\isacharhash}{\kern0pt}A{\isacharparenright}{\kern0pt}{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ x\ {\isasymin}\ A%
\end{isabelle}%
\subsection{Relative concepts\label{sec:def-main-relative}%
}
A list of relative concepts (mostly from the \session{ZF-Constructible}
    library) follows next.%
\begin{isabelle}%
big{\isacharunderscore}{\kern0pt}union{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ A{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ x\ {\isasymin}\ z\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ y\ {\isasymin}\ A\ {\isasymand}\ x\ {\isasymin}\ y{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
upair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ a\ {\isasymin}\ z\ {\isasymand}\ b\ {\isasymin}\ z\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ x\ {\isasymin}\ z\ {\isasymlongrightarrow}\ x\ {\isacharequal}{\kern0pt}\ a\ {\isasymor}\ x\ {\isacharequal}{\kern0pt}\ b{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
pair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ 
{\isasymexists}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ upair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ x{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymexists}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ upair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ b{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymand}\ upair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
successor{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
{\isasymexists}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ upair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ x{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}xa{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ xa\ {\isasymin}\ z\ {\isasymlongleftrightarrow}\ xa\ {\isasymin}\ x\ {\isasymor}\ xa\ {\isasymin}\ a{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
empty{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ x\ {\isasymnotin}\ z%
\end{isabelle}%
\begin{isabelle}%
transitive{\isacharunderscore}{\kern0pt}set{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ x\ {\isasymin}\ a\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymforall}xa{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ xa\ {\isasymin}\ x\ {\isasymlongrightarrow}\ xa\ {\isasymin}\ a{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
ordinal{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
transitive{\isacharunderscore}{\kern0pt}set{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ x\ {\isasymin}\ a\ {\isasymlongrightarrow}\ transitive{\isacharunderscore}{\kern0pt}set{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ x{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
image{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ r{\isacharcomma}{\kern0pt}\ A{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
{\isasymforall}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ y\ {\isasymin}\ z\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}w{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ w\ {\isasymin}\ r\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymexists}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ x\ {\isasymin}\ A\ {\isasymand}\ pair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharcomma}{\kern0pt}\ w{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
is{\isacharunderscore}{\kern0pt}apply{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ f{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
{\isasymexists}xs{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\isanewline
\isaindent{\ \ \ }{\isasymexists}fxs{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ upair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ xs{\isacharparenright}{\kern0pt}\ {\isasymand}\ image{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ f{\isacharcomma}{\kern0pt}\ xs{\isacharcomma}{\kern0pt}\ fxs{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\isaindent{\ \ \ \ \ }big{\isacharunderscore}{\kern0pt}union{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ fxs{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
is{\isacharunderscore}{\kern0pt}function{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ r{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
{\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\isanewline
\isaindent{\ \ \ }{\isasymforall}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\isanewline
\isaindent{\ \ \ \ \ \ }{\isasymforall}y{\isacharprime}{\kern0pt}{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\isanewline
\isaindent{\ \ \ \ \ \ \ \ \ }{\isasymforall}p{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\isanewline
\isaindent{\ \ \ \ \ \ \ \ \ \ \ \ }{\isasymforall}p{\isacharprime}{\kern0pt}{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\isanewline
\isaindent{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }pair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharcomma}{\kern0pt}\ p{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\isanewline
\isaindent{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }pair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharprime}{\kern0pt}{\isacharcomma}{\kern0pt}\ p{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ p\ {\isasymin}\ r\ {\isasymlongrightarrow}\ p{\isacharprime}{\kern0pt}\ {\isasymin}\ r\ {\isasymlongrightarrow}\ y\ {\isacharequal}{\kern0pt}\ y{\isacharprime}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
is{\isacharunderscore}{\kern0pt}relation{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ r{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymforall}z{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ z\ {\isasymin}\ r\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymexists}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ pair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
is{\isacharunderscore}{\kern0pt}domain{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ r{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
{\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ x\ {\isasymin}\ z\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}w{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ w\ {\isasymin}\ r\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymexists}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ pair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharcomma}{\kern0pt}\ w{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
typed{\isacharunderscore}{\kern0pt}function{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ A{\isacharcomma}{\kern0pt}\ B{\isacharcomma}{\kern0pt}\ r{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
is{\isacharunderscore}{\kern0pt}function{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ r{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
is{\isacharunderscore}{\kern0pt}relation{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ r{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
is{\isacharunderscore}{\kern0pt}domain{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ r{\isacharcomma}{\kern0pt}\ A{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
{\isacharparenleft}{\kern0pt}{\isasymforall}u{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ u\ {\isasymin}\ r\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ pair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharcomma}{\kern0pt}\ u{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ y\ {\isasymin}\ B{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
is{\isacharunderscore}{\kern0pt}function{\isacharunderscore}{\kern0pt}space{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ A{\isacharcomma}{\kern0pt}\ B{\isacharcomma}{\kern0pt}\ fs{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
M{\isacharparenleft}{\kern0pt}fs{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}f{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ f\ {\isasymin}\ fs\ {\isasymlongleftrightarrow}\ typed{\isacharunderscore}{\kern0pt}function{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ A{\isacharcomma}{\kern0pt}\ B{\isacharcomma}{\kern0pt}\ f{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isasep\isanewline\isanewline%
A\ {\isasymrightarrow}\isactrlbsup M\isactrlesup \ B\ {\isasymequiv}\ THE\ d{\isachardot}{\kern0pt}\ is{\isacharunderscore}{\kern0pt}function{\isacharunderscore}{\kern0pt}space{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ A{\isacharcomma}{\kern0pt}\ B{\isacharcomma}{\kern0pt}\ d{\isacharparenright}{\kern0pt}\isasep\isanewline\isanewline%
surjection{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ A{\isacharcomma}{\kern0pt}\ B{\isacharcomma}{\kern0pt}\ f{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
typed{\isacharunderscore}{\kern0pt}function{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ A{\isacharcomma}{\kern0pt}\ B{\isacharcomma}{\kern0pt}\ f{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
{\isacharparenleft}{\kern0pt}{\isasymforall}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ y\ {\isasymin}\ B\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ x\ {\isasymin}\ A\ {\isasymand}\ is{\isacharunderscore}{\kern0pt}apply{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ f{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\end{isabelle}%

\subsubsection*{Relative version of the $\ZFC$ axioms}
\begin{isabelle}%
extensionality{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymforall}z{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ z\ {\isasymin}\ x\ {\isasymlongleftrightarrow}\ z\ {\isasymin}\ y{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ x\ {\isacharequal}{\kern0pt}\ y%
\end{isabelle}%
\begin{isabelle}%
foundation{\isacharunderscore}{\kern0pt}ax{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
{\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymexists}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ y\ {\isasymin}\ x{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ y\ {\isasymin}\ x\ {\isasymand}\ {\isasymnot}\ {\isacharparenleft}{\kern0pt}{\isasymexists}z{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ z\ {\isasymin}\ x\ {\isasymand}\ z\ {\isasymin}\ y{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
upair{\isacharunderscore}{\kern0pt}ax{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymexists}z{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ upair{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ y{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
Union{\isacharunderscore}{\kern0pt}ax{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymexists}z{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ big{\isacharunderscore}{\kern0pt}union{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
power{\isacharunderscore}{\kern0pt}ax{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymexists}z{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}xa{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ xa\ {\isasymin}\ z\ {\isasymlongleftrightarrow}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymforall}xb{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ xb\ {\isasymin}\ xa\ {\isasymlongrightarrow}\ xb\ {\isasymin}\ x{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
infinity{\isacharunderscore}{\kern0pt}ax{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
{\isasymexists}I{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\isanewline
\isaindent{\ \ \ }{\isacharparenleft}{\kern0pt}{\isasymexists}z{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ empty{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}\ {\isasymand}\ z\ {\isasymin}\ I{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\isaindent{\ \ \ }{\isacharparenleft}{\kern0pt}{\isasymforall}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ y\ {\isasymin}\ I\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}sy{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ successor{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ y{\isacharcomma}{\kern0pt}\ sy{\isacharparenright}{\kern0pt}\ {\isasymand}\ sy\ {\isasymin}\ I{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
choice{\isacharunderscore}{\kern0pt}ax{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymexists}a{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymexists}f{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ ordinal{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ a{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ surjection{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ a{\isacharcomma}{\kern0pt}\ x{\isacharcomma}{\kern0pt}\ f{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
separation{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ P{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymforall}z{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymexists}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ x\ {\isasymin}\ y\ {\isasymlongleftrightarrow}\ x\ {\isasymin}\ z\ {\isasymand}\ P{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
univalent{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ A{\isacharcomma}{\kern0pt}\ P{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
{\isasymforall}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ x\ {\isasymin}\ A\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymforall}y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}z{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ P{\isacharparenleft}{\kern0pt}x{\isacharcomma}{\kern0pt}\ y{\isacharparenright}{\kern0pt}\ {\isasymand}\ P{\isacharparenleft}{\kern0pt}x{\isacharcomma}{\kern0pt}\ z{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ y\ {\isacharequal}{\kern0pt}\ z{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\begin{isabelle}%
strong{\isacharunderscore}{\kern0pt}replacement{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ P{\isacharparenright}{\kern0pt}\ {\isasymequiv}\isanewline
{\isasymforall}A{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\isanewline
\isaindent{\ \ \ }univalent{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ A{\isacharcomma}{\kern0pt}\ P{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}Y{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ {\isasymforall}b{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ b\ {\isasymin}\ Y\ {\isasymlongleftrightarrow}\isanewline
\ \ \ \ \ \ {\isacharparenleft}{\kern0pt}{\isasymexists}x{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ x\ {\isasymin}\ A\ {\isasymand}
P{\isacharparenleft}{\kern0pt}x{\isacharcomma}{\kern0pt}\ b{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\end{isabelle}%
\subsubsection*{Internalized formulas}
“Codes” for formulas (as sets) are constructed from natural
numbers using \isa{Member}, \isa{Equal}, \isa{Nand},
and \isa{Forall}.%
\begin{isabelle}%
{\isasymlbrakk}x\ {\isasymin}\ {\isasymomega}{\isacharsemicolon}{\kern0pt}\ y\ {\isasymin}\ {\isasymomega}{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymcdot}x\ {\isasymin}\ y{\isasymcdot}\ {\isasymin}\ formula\isasep\isanewline%
{\isasymlbrakk}x\ {\isasymin}\ {\isasymomega}{\isacharsemicolon}{\kern0pt}\ y\ {\isasymin}\ {\isasymomega}{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymcdot}x\ {\isacharequal}{\kern0pt}\ y{\isasymcdot}\ {\isasymin}\ formula\isasep\isanewline%
{\isasymlbrakk}p\ {\isasymin}\ formula{\isacharsemicolon}{\kern0pt}\ q\ {\isasymin}\ formula{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymcdot}{\isasymnot}{\isacharparenleft}{\kern0pt}p\ {\isasymand}\ q{\isacharparenright}{\kern0pt}{\isasymcdot}\ {\isasymin}\ formula\isasep\isanewline%
p\ {\isasymin}\ formula\ {\isasymLongrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymcdot}{\isasymforall}p{\isasymcdot}{\isacharparenright}{\kern0pt}\ {\isasymin}\ formula\isasep\isanewline\isanewline%
{\isasymlbrakk}x\ {\isasymin}\ formula{\isacharsemicolon}{\kern0pt}\ {\isasymAnd}x\ y{\isachardot}{\kern0pt}\ {\isasymlbrakk}x\ {\isasymin}\ {\isasymomega}{\isacharsemicolon}{\kern0pt}\ y\ {\isasymin}\ {\isasymomega}{\isasymrbrakk}\ {\isasymLongrightarrow}\ P{\isacharparenleft}{\kern0pt}{\isasymcdot}x\ {\isasymin}\ y{\isasymcdot}{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\isanewline
\isaindent{\ }{\isasymAnd}x\ y{\isachardot}{\kern0pt}\ {\isasymlbrakk}x\ {\isasymin}\ {\isasymomega}{\isacharsemicolon}{\kern0pt}\ y\ {\isasymin}\ {\isasymomega}{\isasymrbrakk}\ {\isasymLongrightarrow}\ P{\isacharparenleft}{\kern0pt}{\isasymcdot}x\ {\isacharequal}{\kern0pt}\ y{\isasymcdot}{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\isanewline
\isaindent{\ }{\isasymAnd}p\ q{\isachardot}{\kern0pt}\ {\isasymlbrakk}p\ {\isasymin}\ formula{\isacharsemicolon}{\kern0pt}\ P{\isacharparenleft}{\kern0pt}p{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\ q\ {\isasymin}\ formula{\isacharsemicolon}{\kern0pt}\ P{\isacharparenleft}{\kern0pt}q{\isacharparenright}{\kern0pt}{\isasymrbrakk}\ {\isasymLongrightarrow}\ P{\isacharparenleft}{\kern0pt}{\isasymcdot}{\isasymnot}{\isacharparenleft}{\kern0pt}p\ {\isasymand}\ q{\isacharparenright}{\kern0pt}{\isasymcdot}{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\isanewline
\isaindent{\ }{\isasymAnd}p{\isachardot}{\kern0pt}\ {\isasymlbrakk}p\ {\isasymin}\ formula{\isacharsemicolon}{\kern0pt}\ P{\isacharparenleft}{\kern0pt}p{\isacharparenright}{\kern0pt}{\isasymrbrakk}\ {\isasymLongrightarrow}\ P{\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}{\isasymcdot}{\isasymforall}p{\isasymcdot}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isasymrbrakk}\isanewline
{\isasymLongrightarrow}\ P{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}%
\end{isabelle}%
Definitions for the other connectives and the internal existential
quantifier are also provided. For instance, negation:%
\begin{isabelle}%
{\isasymcdot}{\isasymnot}p{\isasymcdot}\ {\isasymequiv}\ {\isasymcdot}{\isasymnot}{\isacharparenleft}{\kern0pt}p\ {\isasymand}\ p{\isacharparenright}{\kern0pt}{\isasymcdot}%
\end{isabelle}%
The \isa{arity} function strictly bounding the free de Bruijn
indices of a formula is defined below:
\begin{isabelle}%
arity{\isacharparenleft}{\kern0pt}{\isasymcdot}x\ {\isasymin}\ y{\isasymcdot}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ succ{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ succ{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\isasep\isanewline%
arity{\isacharparenleft}{\kern0pt}{\isasymcdot}x\ {\isacharequal}{\kern0pt}\ y{\isasymcdot}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ succ{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymunion}\ succ{\isacharparenleft}{\kern0pt}y{\isacharparenright}{\kern0pt}\isasep\isanewline%
arity{\isacharparenleft}{\kern0pt}{\isasymcdot}{\isasymnot}{\isacharparenleft}{\kern0pt}p\ {\isasymand}\ q{\isacharparenright}{\kern0pt}{\isasymcdot}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ arity{\isacharparenleft}{\kern0pt}p{\isacharparenright}{\kern0pt}\ {\isasymunion}\ arity{\isacharparenleft}{\kern0pt}q{\isacharparenright}{\kern0pt}\isasep\isanewline%
arity{\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}{\isasymcdot}{\isasymforall}p{\isasymcdot}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ pred{\isacharparenleft}{\kern0pt}arity{\isacharparenleft}{\kern0pt}p{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\end{isabelle}%
We have the satisfaction relation between $\in$-models and
    first order formulas (given a “environment” list representing
    the assignment of free variables),%
\begin{isabelle}%
{\isasymlbrakk}nth{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ x{\isacharsemicolon}{\kern0pt}\ nth{\isacharparenleft}{\kern0pt}j{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ y{\isacharsemicolon}{\kern0pt}\ env\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}{\isasymrbrakk}\isanewline
{\isasymLongrightarrow}\ x\ {\isasymin}\ y\ {\isasymlongleftrightarrow}\ A{\isacharcomma}{\kern0pt}\ env\ {\isasymTurnstile}\ {\isasymcdot}i\ {\isasymin}\ j{\isasymcdot}\isasep\isanewline\isanewline%
{\isasymlbrakk}nth{\isacharparenleft}{\kern0pt}i{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ x{\isacharsemicolon}{\kern0pt}\ nth{\isacharparenleft}{\kern0pt}j{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\ y{\isacharsemicolon}{\kern0pt}\ env\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}{\isasymrbrakk}\isanewline
{\isasymLongrightarrow}\ x\ {\isacharequal}{\kern0pt}\ y\ {\isasymlongleftrightarrow}\ A{\isacharcomma}{\kern0pt}\ env\ {\isasymTurnstile}\ {\isasymcdot}i\ {\isacharequal}{\kern0pt}\ j{\isasymcdot}\isasep\isanewline\isanewline%
env\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ {\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}\ env\ {\isasymTurnstile}\ {\isasymcdot}{\isasymnot}{\isacharparenleft}{\kern0pt}p\ {\isasymand}\ q{\isacharparenright}{\kern0pt}{\isasymcdot}{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isasymnot}\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}\ env\ {\isasymTurnstile}\ p{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline%
\ \ {\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}\ env\ {\isasymTurnstile}\ q{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isasep\isanewline\isanewline%
env\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ {\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}\ env\ {\isasymTurnstile}\ {\isacharparenleft}{\kern0pt}{\isasymcdot}{\isasymforall}p{\isasymcdot}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymforall}x{\isasymin}A{\isachardot}{\kern0pt}\ A{\isacharcomma}{\kern0pt}\ Cons{\isacharparenleft}{\kern0pt}x{\isacharcomma}{\kern0pt}\ env{\isacharparenright}{\kern0pt}\ {\isasymTurnstile}\ p{\isacharparenright}{\kern0pt}%
\end{isabelle}%
as well as the satisfaction of an arbitrary set of sentences.%
\begin{isabelle}%
A\ {\isasymTurnstile}\ {\isasymPhi}\ {\isasymequiv}\ {\isasymforall}{\isasymphi}{\isasymin}{\isasymPhi}{\isachardot}{\kern0pt}\ A{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymphi}%
\end{isabelle}%
The internalized (viz. as elements of the set \isa{formula})
versions of the axioms are checked next against the relative statements.%
\begin{isabelle}%
Union{\isacharunderscore}{\kern0pt}ax{\isacharparenleft}{\kern0pt}{\isacharhash}{\kern0pt}{\isacharhash}{\kern0pt}A{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ A{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymcdot}Union\ Ax{\isasymcdot}\isasep\isanewline%
power{\isacharunderscore}{\kern0pt}ax{\isacharparenleft}{\kern0pt}{\isacharhash}{\kern0pt}{\isacharhash}{\kern0pt}A{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ A{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymcdot}Powerset\ Ax{\isasymcdot}\isasep\isanewline%
upair{\isacharunderscore}{\kern0pt}ax{\isacharparenleft}{\kern0pt}{\isacharhash}{\kern0pt}{\isacharhash}{\kern0pt}A{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ A{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymcdot}Pairing{\isasymcdot}\isasep\isanewline%
foundation{\isacharunderscore}{\kern0pt}ax{\isacharparenleft}{\kern0pt}{\isacharhash}{\kern0pt}{\isacharhash}{\kern0pt}A{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ A{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymcdot}Foundation{\isasymcdot}\isasep\isanewline%
extensionality{\isacharparenleft}{\kern0pt}{\isacharhash}{\kern0pt}{\isacharhash}{\kern0pt}A{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ A{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymcdot}Extensionality{\isasymcdot}\isasep\isanewline%
infinity{\isacharunderscore}{\kern0pt}ax{\isacharparenleft}{\kern0pt}{\isacharhash}{\kern0pt}{\isacharhash}{\kern0pt}A{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ A{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymcdot}Infinity{\isasymcdot}\isasep\isanewline\isanewline%
{\isasymphi}\ {\isasymin}\ formula\ {\isasymLongrightarrow}\isanewline
{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymcdot}Separation{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}{\isasymcdot}{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\isanewline
{\isacharparenleft}{\kern0pt}{\isasymforall}env{\isasymin}list{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isachardot}{\kern0pt}\isanewline
\isaindent{{\isacharparenleft}{\kern0pt}\ \ \ }arity{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}\ {\isasymle}\ {\isadigit{1}}\ {\isacharplus}{\kern0pt}\isactrlsub {\isasymomega}\ length{\isacharparenleft}{\kern0pt}env{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\isanewline
\ \ \ \ separation{\isacharparenleft}{\kern0pt}{\isacharhash}{\kern0pt}{\isacharhash}{\kern0pt}M{\isacharcomma}{\kern0pt}\ {\isasymlambda}x{\isachardot}{\kern0pt}\ M{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}x{\isacharbrackright}{\kern0pt}\ {\isacharat}{\kern0pt}\ env\ {\isasymTurnstile}\ {\isasymphi}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isasep\isanewline\isanewline%
{\isasymphi}\ {\isasymin}\ formula\ {\isasymLongrightarrow}\isanewline
{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymcdot}Replacement{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}{\isasymcdot}{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymforall}env{\isachardot}{\kern0pt}\ replacement{\isacharunderscore}{\kern0pt}assm{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ env{\isacharcomma}{\kern0pt}\ {\isasymphi}{\isacharparenright}{\kern0pt}{\isacharparenright}\isanewline\isanewline%
choice{\isacharunderscore}{\kern0pt}ax{\isacharparenleft}{\kern0pt}{\isacharhash}{\kern0pt}{\isacharhash}{\kern0pt}A{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ A{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymcdot}AC{\isasymcdot}%
\end{isabelle}%

Finally, the axiom sets are defined as follows.

\begin{isabelle}%
ZF{\isacharunderscore}{\kern0pt}fin\ {\isasymequiv}\isanewline
{\isacharbraceleft}{\kern0pt}{\isasymcdot}Extensionality{\isasymcdot}{\isacharcomma}{\kern0pt}\ {\isasymcdot}Foundation{\isasymcdot}{\isacharcomma}{\kern0pt}\ {\isasymcdot}Pairing{\isasymcdot}{\isacharcomma}{\kern0pt}\ {\isasymcdot}Union\ Ax{\isasymcdot}{\isacharcomma}{\kern0pt}\ {\isasymcdot}Infinity{\isasymcdot}{\isacharcomma}{\kern0pt}\isanewline
\isaindent{{\isacharbraceleft}{\kern0pt}}{\isasymcdot}Powerset\ Ax{\isasymcdot}{\isacharbraceright}{\kern0pt}\isasep\isanewline\isanewline%
ZF{\isacharunderscore}{\kern0pt}schemes\ {\isasymequiv}\isanewline
{\isacharbraceleft}{\kern0pt}{\isasymcdot}Separation{\isacharparenleft}{\kern0pt}p{\isacharparenright}{\kern0pt}{\isasymcdot}\ {\isachardot}{\kern0pt}\ p\ {\isasymin}\ formula{\isacharbraceright}{\kern0pt}\ {\isasymunion}\ {\isacharbraceleft}{\kern0pt}{\isasymcdot}Replacement{\isacharparenleft}{\kern0pt}p{\isacharparenright}{\kern0pt}{\isasymcdot}\ {\isachardot}{\kern0pt}\ p\ {\isasymin}\ formula{\isacharbraceright}{\kern0pt}\isasep\isanewline\isanewline%
{\isasymcdot}Z{\isasymcdot}\ {\isasymequiv}\ ZF{\isacharunderscore}{\kern0pt}fin\ {\isasymunion}\ {\isacharbraceleft}{\kern0pt}{\isasymcdot}Separation{\isacharparenleft}{\kern0pt}p{\isacharparenright}{\kern0pt}{\isasymcdot}\ {\isachardot}{\kern0pt}\ p\ {\isasymin}\ formula{\isacharbraceright}{\kern0pt}\isasep\isanewline%
ZC\ {\isasymequiv}\ {\isasymcdot}Z{\isasymcdot}\ {\isasymunion}\ {\isacharbraceleft}{\kern0pt}{\isasymcdot}AC{\isasymcdot}{\isacharbraceright}{\kern0pt}\isasep\isanewline%
ZF\ {\isasymequiv}\ ZF{\isacharunderscore}{\kern0pt}schemes\ {\isasymunion}\ ZF{\isacharunderscore}{\kern0pt}fin\isasep\isanewline%
ZFC\ {\isasymequiv}\ ZF\ {\isasymunion}\ {\isacharbraceleft}{\kern0pt}{\isasymcdot}AC{\isasymcdot}{\isacharbraceright}{\kern0pt}%
\end{isabelle}%

\subsection{Relativization of infinitary arithmetic\label{sec:relative-arith}%
}
In order to state the defining property of the relative
equipotence relation, we work under the assumptions of the
locale \isa{M{\isacharunderscore}{\kern0pt}cardinals}. They comprise a finite set
of instances of Separation and Replacement to prove
closure properties of the transitive class \isa{M}.%
\begin{isabelle}
\isacommand{lemma}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}\isakeyword{in}\ M{\isacharunderscore}{\kern0pt}cardinals{\isacharparenright}{\kern0pt}\ eqpoll{\isacharunderscore}{\kern0pt}def{\isacharprime}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}M{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ {\isachardoublequoteopen}M{\isacharparenleft}{\kern0pt}B{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\ \isakeyword{shows}\ {\isachardoublequoteopen}A\ {\isasymapprox}\isactrlbsup M\isactrlesup \ B\ {\isasymlongleftrightarrow}\ {\isacharparenleft}{\kern0pt}{\isasymexists}f{\isacharbrackleft}{\kern0pt}M{\isacharbrackright}{\kern0pt}{\isachardot}{\kern0pt}\ f\ {\isasymin}\ bij{\isacharparenleft}{\kern0pt}A{\isacharcomma}{\kern0pt}B{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}
\end{isabelle}

%
Below, $\mu$ denotes the minimum operator on the ordinals.%
\begin{isabelle}
  \isacommand{lemma}\isamarkupfalse%
\ cardinalities{\isacharunderscore}{\kern0pt}defs{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{fixes}\ M{\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}{\isachardoublequoteopen}i{\isasymRightarrow}o{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isacharbar}{\kern0pt}A{\isacharbar}{\kern0pt}\isactrlbsup M\isactrlesup \ {\isasymequiv}\ {\isasymmu}\ i{\isachardot}{\kern0pt}\ M{\isacharparenleft}{\kern0pt}i{\isacharparenright}{\kern0pt}\ {\isasymand}\ i\ {\isasymapprox}\isactrlbsup M\isactrlesup \ A{\isachardoublequoteclose}\isanewline
\ \ \ \ {\isachardoublequoteopen}Card\isactrlbsup M\isactrlesup {\isacharparenleft}{\kern0pt}{\isasymalpha}{\isacharparenright}{\kern0pt}\ {\isasymequiv}\ {\isasymalpha}\ {\isacharequal}{\kern0pt}\ {\isacharbar}{\kern0pt}{\isasymalpha}{\isacharbar}{\kern0pt}\isactrlbsup M\isactrlesup {\isachardoublequoteclose}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isasymkappa}\isactrlbsup {\isasymup}{\isasymnu}{\isacharcomma}{\kern0pt}M\isactrlesup \ {\isasymequiv}\ {\isacharbar}{\kern0pt}{\isasymnu}\ {\isasymrightarrow}\isactrlbsup M\isactrlesup \ {\isasymkappa}{\isacharbar}{\kern0pt}\isactrlbsup M\isactrlesup {\isachardoublequoteclose}\isanewline
\ \ \ \ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isasymkappa}\isactrlsup {\isacharplus}{\kern0pt}{\isacharparenright}{\kern0pt}\isactrlbsup M\isactrlesup \ {\isasymequiv}\ {\isasymmu}\ x{\isachardot}{\kern0pt}\ M{\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymand}\ Card\isactrlbsup M\isactrlesup {\isacharparenleft}{\kern0pt}x{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isasymkappa}\ {\isacharless}{\kern0pt}\ x{\isachardoublequoteclose}
\end{isabelle}
Analogous to the previous Lemma
\isa{eqpoll{\isacharunderscore}{\kern0pt}def{\isacharprime}{\kern0pt}},
the next lemma holds under
the assumptions of the locale \isa{M{\isacharunderscore}{\kern0pt}aleph}. The axiom instances
included are sufficient to state and prove the defining
properties of the relativized \isa{Aleph} function
(in particular, the required ability to perform transfinite recursions).%
\begin{isabelle}%
\isacommand{context}\isamarkupfalse%
\ M{\isacharunderscore}{\kern0pt}aleph\isanewline
\isakeyword{begin}%
\isanewline
\isanewline
{\isasymaleph}\isactrlbsub {\isadigit{0}}\isactrlesub \isactrlbsup M\isactrlesup \ {\isacharequal}{\kern0pt}\ {\isasymomega}\isasep\isanewline%
{\isasymlbrakk}Ord{\isacharparenleft}{\kern0pt}{\isasymalpha}{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\ M{\isacharparenleft}{\kern0pt}{\isasymalpha}{\isacharparenright}{\kern0pt}{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymaleph}\isactrlbsub succ{\isacharparenleft}{\kern0pt}{\isasymalpha}{\isacharparenright}{\kern0pt}\isactrlesub \isactrlbsup M\isactrlesup \ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymaleph}\isactrlbsub {\isasymalpha}\isactrlesub \isactrlbsup M\isactrlesup \isactrlsup {\isacharplus}{\kern0pt}{\isacharparenright}{\kern0pt}\isactrlbsup M\isactrlesup \isasep\isanewline%
{\isasymlbrakk}Limit{\isacharparenleft}{\kern0pt}{\isasymalpha}{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\ M{\isacharparenleft}{\kern0pt}{\isasymalpha}{\isacharparenright}{\kern0pt}{\isasymrbrakk}\ {\isasymLongrightarrow}\ {\isasymaleph}\isactrlbsub {\isasymalpha}\isactrlesub \isactrlbsup M\isactrlesup \ {\isacharequal}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymUnion}j{\isasymin}{\isasymalpha}{\isachardot}{\kern0pt}\ {\isasymaleph}\isactrlbsub j\isactrlesub \isactrlbsup M\isactrlesup {\isacharparenright}{\kern0pt}%
\end{isabelle}%
\isacommand{end}\isamarkupfalse%
\ %
\isamarkupcmt{\isa{M{\isacharunderscore}{\kern0pt}aleph}%
}
\begin{isabelle}
\isacommand{lemma}\isamarkupfalse%
\ ContHyp{\isacharunderscore}{\kern0pt}rel{\isacharunderscore}{\kern0pt}def{\isacharprime}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{fixes}\ N{\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}{\isachardoublequoteopen}i{\isasymRightarrow}o{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\isanewline
\ \ \ \ {\isachardoublequoteopen}CH\isactrlbsup N\isactrlesup \ {\isasymequiv}\ {\isasymaleph}\isactrlbsub {\isadigit{1}}\isactrlesub \isactrlbsup N\isactrlesup \ {\isacharequal}{\kern0pt}\ {\isadigit{2}}\isactrlbsup {\isasymup}{\isasymaleph}\isactrlbsub {\isadigit{0}}\isactrlesub \isactrlbsup N\isactrlesup {\isacharcomma}{\kern0pt}N\isactrlesup {\isachardoublequoteclose}
\end{isabelle}

%
%
Under appropriate hypotheses (this time, from the locale \isa{M{\isacharunderscore}{\kern0pt}ZF{\isacharunderscore}{\kern0pt}library}),
   \isa{CH\isactrlbsup M\isactrlesup } is equivalent to its fully relational version \isa{is{\isacharunderscore}{\kern0pt}ContHyp}.
    As a sanity check, we see that if the transitive class is indeed \isa{{\isasymV}},
    we recover the original $\CH$.%
\begin{isabelle}%
M{\isacharunderscore}{\kern0pt}ZF{\isacharunderscore}{\kern0pt}library{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}\ {\isasymLongrightarrow}\ is{\isacharunderscore}{\kern0pt}ContHyp{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ CH\isactrlbsup M\isactrlesup \isasep\isanewline%
is{\isacharunderscore}{\kern0pt}ContHyp{\isacharparenleft}{\kern0pt}{\isasymV}{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ {\isasymaleph}\isactrlbsub {\isadigit{1}}\isactrlesub \ {\isacharequal}{\kern0pt}\ {\isadigit{2}}\isactrlbsup {\isasymup}{\isasymaleph}\isactrlbsub {\isadigit{0}}\isactrlesub \isactrlesup %
\end{isabelle}%
In turn, the fully relational version evaluated on a nonempty
transitive \isa{A} is equivalent to the satisfaction of the
first-order formula \isa{{\isasymcdot}CH{\isasymcdot}} (since it
actually is a sentence, it does not depend on \isa{env}, which
appears only because the definition of $\models$ requires that argument).%
\begin{isabelle}%
{\isasymlbrakk}env\ {\isasymin}\ list{\isacharparenleft}{\kern0pt}A{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\ {\isadigit{0}}\ {\isasymin}\ A{\isasymrbrakk}\ {\isasymLongrightarrow}\ is{\isacharunderscore}{\kern0pt}ContHyp{\isacharparenleft}{\kern0pt}{\isacharhash}{\kern0pt}{\isacharhash}{\kern0pt}A{\isacharparenright}{\kern0pt}\ {\isasymlongleftrightarrow}\ A{\isacharcomma}{\kern0pt}\ env\ {\isasymTurnstile}\ {\isasymcdot}CH{\isasymcdot}%
\end{isabelle}%
%% \subsection{Forcing \label{sec:def-main-forcing}%
%% }
%% Our first milestone was to obtain a proper extension using forcing.
%% Its original proof didn't required the previous developments involving
%% below.%
%% \begin{isabelle}%
%% {\isasymlbrakk}M\ {\isasymapprox}\ {\isasymomega}{\isacharsemicolon}{\kern0pt}\ Transset{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\ M\ {\isasymTurnstile}\ ZF{\isasymrbrakk}\isanewline
%% {\isasymLongrightarrow}\ {\isasymexists}N{\isachardot}{\kern0pt}\ M\ {\isasymsubseteq}\ N\ {\isasymand}\isanewline
%% \isaindent{{\isasymLongrightarrow}\ {\isasymexists}N{\isachardot}{\kern0pt}\ }N\ {\isasymapprox}\ {\isasymomega}\ {\isasymand}\isanewline
%% \isaindent{{\isasymLongrightarrow}\ {\isasymexists}N{\isachardot}{\kern0pt}\ }Transset{\isacharparenleft}{\kern0pt}N{\isacharparenright}{\kern0pt}\ {\isasymand}\isanewline
%% \isaindent{{\isasymLongrightarrow}\ {\isasymexists}N{\isachardot}{\kern0pt}\ }N\ {\isasymTurnstile}\ ZF\ {\isasymand}\isanewline
%% \isaindent{{\isasymLongrightarrow}\ {\isasymexists}N{\isachardot}{\kern0pt}\ }M\ {\isasymnoteq}\ N\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}{\isasymalpha}{\isachardot}{\kern0pt}\ Ord{\isacharparenleft}{\kern0pt}{\isasymalpha}{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ {\isasymalpha}\ {\isasymin}\ M\ {\isasymlongleftrightarrow}\ {\isasymalpha}\ {\isasymin}\ N{\isacharparenright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isacharparenleft}{\kern0pt}M{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymcdot}AC{\isasymcdot}{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ N\ {\isasymTurnstile}\ ZFC{\isacharparenright}{\kern0pt}%
%% \end{isabelle}%
%% We can finally state our main results, namely, the existence of models
%% for $\ZFC + \CH$ and $\ZFC + \neg\CH$ under the assumption of a ctm of $\ZFC$.%
%% \begin{isabelle}%
%% {\isasymlbrakk}M\ {\isasymapprox}\ {\isasymomega}{\isacharsemicolon}{\kern0pt}\ Transset{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\ M\ {\isasymTurnstile}\ ZFC{\isasymrbrakk}\isanewline
%% {\isasymLongrightarrow}\ {\isasymexists}N{\isachardot}{\kern0pt}\ M\ {\isasymsubseteq}\ N\ {\isasymand}\isanewline
%% \isaindent{{\isasymLongrightarrow}\ {\isasymexists}N{\isachardot}{\kern0pt}\ }N\ {\isasymapprox}\ {\isasymomega}\ {\isasymand}\isanewline
%% \isaindent{{\isasymLongrightarrow}\ {\isasymexists}N{\isachardot}{\kern0pt}\ }Transset{\isacharparenleft}{\kern0pt}N{\isacharparenright}{\kern0pt}\ {\isasymand}\ N\ {\isasymTurnstile}\ ZFC\ {\isasymunion}\ {\isacharbraceleft}{\kern0pt}{\isasymcdot}{\isasymnot}{\isasymcdot}CH{\isasymcdot}{\isasymcdot}{\isacharbraceright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}{\isasymalpha}{\isachardot}{\kern0pt}\ Ord{\isacharparenleft}{\kern0pt}{\isasymalpha}{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ {\isasymalpha}\ {\isasymin}\ M\ {\isasymlongleftrightarrow}\ {\isasymalpha}\ {\isasymin}\ N{\isacharparenright}{\kern0pt}%
%% \end{isabelle}%
%% \begin{isabelle}%
%% {\isasymlbrakk}M\ {\isasymapprox}\ {\isasymomega}{\isacharsemicolon}{\kern0pt}\ Transset{\isacharparenleft}{\kern0pt}M{\isacharparenright}{\kern0pt}{\isacharsemicolon}{\kern0pt}\ M\ {\isasymTurnstile}\ ZFC{\isasymrbrakk}\isanewline
%% {\isasymLongrightarrow}\ {\isasymexists}N{\isachardot}{\kern0pt}\ M\ {\isasymsubseteq}\ N\ {\isasymand}\isanewline
%% \isaindent{{\isasymLongrightarrow}\ {\isasymexists}N{\isachardot}{\kern0pt}\ }N\ {\isasymapprox}\ {\isasymomega}\ {\isasymand}\isanewline
%% \isaindent{{\isasymLongrightarrow}\ {\isasymexists}N{\isachardot}{\kern0pt}\ }Transset{\isacharparenleft}{\kern0pt}N{\isacharparenright}{\kern0pt}\ {\isasymand}\ N\ {\isasymTurnstile}\ ZFC\ {\isasymunion}\ {\isacharbraceleft}{\kern0pt}{\isasymcdot}CH{\isasymcdot}{\isacharbraceright}{\kern0pt}\ {\isasymand}\ {\isacharparenleft}{\kern0pt}{\isasymforall}{\isasymalpha}{\isachardot}{\kern0pt}\ Ord{\isacharparenleft}{\kern0pt}{\isasymalpha}{\isacharparenright}{\kern0pt}\ {\isasymlongrightarrow}\ {\isasymalpha}\ {\isasymin}\ M\ {\isasymlongleftrightarrow}\ {\isasymalpha}\ {\isasymin}\ N{\isacharparenright}{\kern0pt}%
%% \end{isabelle}%
%% In the above three statements, the function \isa{ground{\isacharunderscore}{\kern0pt}repl{\isacharunderscore}{\kern0pt}fm}
%% takes an element \isa{{\isasymphi}} of \isa{formula} and returns the
%% replacement instance in the ground model that produces the
%% \isa{{\isasymphi}}-replacement instance in the generic extension. The next
%% result is stated in the context \isa{G{\isacharunderscore}{\kern0pt}generic{\isadigit{1}}}, which assumes
%% the existence of a generic filter.
%% %
%% \begin{isabelle}%
%% \isacommand{context}\isamarkupfalse%
%% \ G{\isacharunderscore}{\kern0pt}generic{\isadigit{1}}\isanewline
%% \isakeyword{begin}\isanewline
%% \isanewline
%% {\isasymlbrakk}{\isasymphi}\ {\isasymin}\ formula{\isacharsemicolon}{\kern0pt}\ M{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymcdot}Replacement{\isacharparenleft}{\kern0pt}ground{\isacharunderscore}{\kern0pt}repl{\isacharunderscore}{\kern0pt}fm{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isasymcdot}{\isasymrbrakk}\isanewline
%% {\isasymLongrightarrow}\ M{\isacharbrackleft}{\kern0pt}G{\isacharbrackright}{\kern0pt}{\isacharcomma}{\kern0pt}\ {\isacharbrackleft}{\kern0pt}{\isacharbrackright}{\kern0pt}\ {\isasymTurnstile}\ {\isasymcdot}Replacement{\isacharparenleft}{\kern0pt}{\isasymphi}{\isacharparenright}{\kern0pt}{\isasymcdot}%
%% \end{isabelle}%
%% \isacommand{end}\isamarkupfalse%
%% \ %
%% \isamarkupcmt{\isa{G{\isacharunderscore}{\kern0pt}generic{\isadigit{1}}}%
%% }

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "independence_ch_isabelle"
%%% ispell-local-dictionary: "american"
%%% End:
