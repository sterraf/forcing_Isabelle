%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%          
\section{Forcing}
Given a ctm $M$, and an $M$-generic filter $G\sbq\PP$, the Forcing
Theorems relate satisfaction of a formula 
$\phi$ in the generic extension $M[G]$ to the satisfaction of another
formula $\forceisa(\phi)$ in $M$. The map $\forceisa$ is defined by
recursion on 
the structure of $\phi$. The fact that this map works (in particular,
in order to show that $M[G]\models\ZFC$), we must use the fact that
$M\models\ZFC$. Since we can only assert the latter using internalized
formulas, the aformentioned map will be defined as a function from the
set \formula{} into itself. 

Up to this point, the main reason for working with internalized
versions is that  it is not possible to do recursion with formulas of
type $\tyo$ (i.e., the formulas in the first-order logic of
Isabelle/ZF).

We will now make more precise the definition of the map
$\forceisa$ and how it relates satisfaction in $M$ to that in
$M[G]$. Actually, if the formula $\phi$ has $n$ free variables,
$\forceisa(\phi)$ will have $n+4$ free variables, where the first four account
for the forcing notion and a particular condition. 

In referring to formulas with free variables and their interpretation,
we use the following conventions. If  $M$ is a set, $a_0,\dots,a_n$
are elements of $M$, and $\phi$ has its free variables
among $x_0,\dots,x_n$, we write
\[
M,[a_0,\dots,a_n] \models \phi(x_0,\dots,x_n)
\]
to denote that $\phi$ is satisfied by $M$ when $x_i$ is interpreted
to be $a_i$ ($i=0,\dots,n$). We call the list $[a_0,\dots,a_n]$ the
\emph{environment}. In the case of a formula of the form
$\forceisa(\phi)$, we'll make an abuse of notation and indicate the
variables inside the argument of $\forceisa$. As an example, take the
formula $\phi\defi x_1\in x_0$. Then
\[
M,[a,b] \models x_1\in x_0
\]
will hold whenever $b\in a$; and instead of writing $\forceisa(\phi)$
we will write $\forceisa(x_5\in x_4)$, as in
\[
M,[\PP,\leq,\1,p,\tau,\rho] \models \forceisa(x_5\in x_4).
\]

If
$\phi=\phi(x_0,\dots,x_n)$, the standard notation for $\forceisa(\phi)$ is
\[
p\forces_{\PP,\leq,\1}^* \phi(x_0,\dots,x_n).
\]
Here, the extra parameters are $\PP,\leq,\1,$ and $p\in\PP$, and the
first three are usually omitted. %(since the forcing notion is fixed
% throughout the discussion).  
Afterwards, the \emph{forcing relation}
$\forces$ is defined by 
relativizing/interpreting $\forces^*$ in a ctm $M$, for fixed
$\lb\PP,\leq,\1\rb\in M$: $p\forces \phi(\tau_0,\dots,\tau_n)$ holds
if and only if
\[ 
M,[\PP,\leq,\1,p,\tau_0,\dots,\tau_n]\models \forceisa(x_4,\dots,x_{n+4}).
\]

\subsection{The fundamental theorems}
These are stated as two lemmas: \emph{Truth} and
\emph{Definability}. The second one ``simply'' says that the forcing
relation is definable. The Truth Lemma states that the forcing
relation indeed relates 
satisfaction in $M[G]$ to that in $M$. 
\begin{lemma}[Truth Lemma]\label{lem:truth-lemma}
  Let $M$ be a ctm of $\ZFC$, $\lb\PP,\leq,\1\rb$ a forcing notion
  in $M$, $p\in\PP$, and $\phi(x_0,\dots,x_n)$ a formula in the
  language of set 
  theory with all free variables displayed. Then the
  following are equivalent, for all $\tau_0,\dots,\tau_n\in M$: 
  \begin{enumerate}
  \item $M[G],[\val(G,\tau_0),\dots,\val(G,\tau_n)]
  \models\phi(x_0,\dots,x_n)$ for 
    all filters $G$, $M$-generic for $\PP$, such that $p\in G$.
  \item $  M,[\PP,\leq,\1,p,\tau_0,\dots,\tau_n] 
  \models\forceisa(\phi(x_4,\dots,x_{n+4}))$.
  \end{enumerate}
\end{lemma}
The proof of the Truth Lemma is by recursion in elements of
$\formula$. The following auxiliary results (adapted from
\cite[IV.2.43]{kunen2011set}) are also proved by recursion in
$\formula$.
\begin{lemma}[Strenghtening]\label{lem:strengthen} 
  Assume the same hypothesis of Lemma~\ref{lem:truth-lemma}.
  $M, [\PP,\leq,\1,p,\dots]\models\forceisa(\phi)$ and $p_1\leq p$
  implies $M, [\PP,\leq,\1,p_1,\dots]\models\forceisa(\phi)$.
\end{lemma}
\begin{lemma}[Density]\label{lem:density}
  Assume the same hypothesis of
  Lemma~\ref{lem:truth-lemma}. $M,[\dots]\models\forceisa(\phi)$ 
  if and only if 
  $M,[\dots]\models$``$\{p_1\leq p : \forceisa(\phi,\PP,\leq,\1,p_1)\}$ is
  dense below $p$.''
\end{lemma}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "Separation_In_MG"
%%% ispell-local-dictionary: "american"
%%% End: 
