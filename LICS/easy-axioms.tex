%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%          
\section{Extensionality, Foundation, Union, Infinity}
\label{sec:easy-axioms}
\newcommand{\quantRel}[3]{#1 #2\kern -1pt[#3]}
\newcommand{\forallRel}[2]{\quantRel{\forall}{#1}{#2}}
\newcommand{\existsRel}[2]{\quantRel{\exists}{#1}{#2}}

It is straightforward to show that the generic extension $M[G]$
satisfies extensionality and foundation. Showing that it is closed
under Union depends on $G$ being a filter. On the other hand, infinity
takes some more effort.

% To say that $A$ satisfies some axiom, say extensionality, means
% that the relativized version of extensionality is true in $A$:
% \[
% \forallRel{x}{A}. \forallRel{y}{A}. (\forallRel{w}{A} . w \in x \leftrightarrow w\in y) \rightarrow x = y
% \]

For Extensionality in $M[G]$, the assumption 
$\forall w[M[G]]. w\in x \leftrightarrow w\in y$ yields 
$\forall w. w\in x \leftrightarrow w\in y$ by transitivity of $M[G]$. %\footnote{We generalized slightly some results by Paulson:
%  in fact, several basic lemmas are valid for any transitive class
%  (for instance, absoluteness of Union). We plan to define a new
%  hierarchy of locales for ZF where transitive classes will be at the
%  base.}
Therefore, by (ambient) Extensionality we conclude $x=y$. 

Foundation for $M[G]$ does not depend on $M[G]$ being transitive: in
this case we take $x\in M[G]$ and prove, relativized to $M[G]$,  that there is an
$\in$\kern -1pt-minimal element in $x$. Instantiating the global Foundation
Axiom for $x\cap M[G]$ we get a minimal $y$, so it is still minimal
when considered relative to $M[G]$. 

It is noteworthy that the proofs in the Isar dialect of Isabelle
strictly follow the argumentation of the two previous paragraphs.

The Union Axiom asserts that if $x$ is a set, then there exists
another set (the union of $x$) containing all the elements in each
element of $x$. The relativized version of Union asks to give a name
$\pi_a$ for each $a\in M[G]$ and proving $\val(G,\pi_a)=\union a$.
Let $\tau$ be the name for $a$, i.e.\ $a=\val(G,\tau)$; 
\citet{kunen2011set} gives $\pi_a$ in terms of $\tau$:
\begin{align*}
  \pi_a = \{\langle\theta,p \rangle :  %&\in \dom(\union(\dom(\tau))) \times \PP : \\
\exists \langle\sigma,q\rangle  \in \tau .
 \exists r . \langle \theta,r\rangle \in \sigma \wedge
    p\leqslant r \wedge p \leqslant q \}
\end{align*}
Our formal definition is slightly different in order to ease the proof of
$\pi_a \in M$.  Since $\pi_a$ it is defined using Separation, one
needs to internalize $\pi_a$ as a formula
\isa{union{\isacharunderscore}name{\isacharunderscore}fm}. The
equation $\val(G,\pi_a)=\union a$ is proved by showing the mutual
inclusion; in both cases one uses that $G$ is a filter.
\begin{isabelle}
  \isacommand{lemma}\isamarkupfalse%
\ Union{\isacharunderscore}MG{\isacharunderscore}Eq\ {\isacharcolon}\ \isanewline
\ \ \isakeyword{assumes}\ {\isachardoublequoteopen}a\ {\isasymin}\ M{\isacharbrackleft}G{\isacharbrackright}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}a\ {\isacharequal}\ val{\isacharparenleft}G{\isacharcomma}{\isasymtau}{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{and}\isanewline
\ \ \ \ \ \ \ \ \ \ {\isachardoublequoteopen}filter{\isacharparenleft}G{\isacharparenright}{\isachardoublequoteclose}\ \isakeyword{and}\ {\isachardoublequoteopen}{\isasymtau}\ {\isasymin}\ M{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}{\isasymUnion}\ a\ {\isacharequal}\ val{\isacharparenleft}G{\isacharcomma}Union{\isacharunderscore}name{\isacharparenleft}{\isasymtau}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}
\end{isabelle}
Since Union is absolute for any transitive class we may conclude that
$M[G]$ is closed under Union:
\begin{isabelle}
  \isacommand{lemma}\isamarkupfalse%
  \ union{\isacharunderscore}in{\isacharunderscore}MG\ {\isacharcolon}\ \isanewline
  \ \ \isakeyword{assumes}\ {\isachardoublequoteopen}filter{\isacharparenleft}G{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}Union{\isacharunderscore}ax{\isacharparenleft}{\isacharhash}{\isacharhash}M{\isacharbrackleft}G{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}
\end{isabelle}

The proof of Infinity for $M[G]$ takes advantage of some absoluteness
results proved in the locale \isa{M{\isacharunderscore}trivial}. Since
we have already proved that $M[G]$ is transitive, $\emptyset\in M[G]$
assuming $G$ being generic, and also that it satisfies Pairing and
Union, we can instantiate \isa{M{\isacharunderscore}trivial}:
\begin{isabelle}
\isacommand{sublocale}\isamarkupfalse%
\ G{\isacharunderscore}generic\ {\isasymsubseteq}\ M{\isacharunderscore}trivial{\isachardoublequoteopen}{\isacharhash}{\isacharhash}M{\isacharbrackleft}G{\isacharbrackright}{\isachardoublequoteclose}
\end{isabelle}
We assume that $M$ satisfies Infinity,\footnote{This is equivalent to
  say that there is an $I\in M$ having an empty set relativized to $M$
  and closed under successor, again relativized to $M$.} therefore we
obtain $I \in M$ such that $\emptyset\in I$ and, $x \in I$ implies
$\mathit{succ}(x)\in I$; this follows by absoluteness of empty and
succesor for $M$. Using one further assumption, namely that
$\chk(x) \in M$ if $x\in M$, we deduce $\val(G,\chk(I)) = I \in M[G]$.
Now we can use absoluteness of emptyness and successor, this time for
$M[G]$, to conclude that $M[G]$ satisfies Infinity.
\begin{isabelle}
  \isacommand{lemma}\isamarkupfalse%
\ infinty{\isacharunderscore}in{\isacharunderscore}MG\ {\isacharcolon}\ {\isachardoublequoteopen}infinity{\isacharunderscore}ax{\isacharparenleft}{\isacharhash}{\isacharhash}M{\isacharbrackleft}G{\isacharbrackright}{\isacharparenright}{\isachardoublequoteclose}
\end{isabelle}
\noindent\fbox{En Generic Extensions decimos que es fácil ver que $M[G]$}
\fbox{ ... incluye a $M \cup {G}$, por qué no sacar $I\in M[G]$ de ahí?}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "Separation_In_MG"
%%% ispell-local-dictionary: "american"
%%% End: 
