\section{Names}
\label{sec:names}
In this section we formalize the function $\val$ that allows to
construct the elements of the generic extension $M[G]$ from elements
the ctm $M$ and the generic filter $G$. The definition of $\val$
can be written succintly as
%
\begin{equation}\label{eq:def-val}
\val(G,\tau)\defi \{\val(G,\sigma) : \exists p\in \PP
(\lb\sigma,p\rb\in\tau \y p\in G)\}.
\end{equation}
%
This proceeds by well-founded recursion on the relation
$\mathit{ed}$:
\[
x \mathrel{\mathit{ed}} y \iff \exists p : \lb x,p\rb\in y.
\]
Recall that in $\ZFC$, an ordered pair $\lb x,y \rb$ is the set
$\{\{x\},\{x,y\}\}$. Hence this relation is well-founded since $\in$
is by the Foundation Axiom.

The  formalization of $\val$ in Isabelle/ZF involves the function
\isa{wfrec}, which takes as an argument a well-founded relation of
type \isa{i}, i.e.\ a set of pairs. Therefore we restrict
$\mathit{ed}$ above to a set.
%
\begin{isabelle}
\isacommand{definition}\isamarkupfalse%
\isanewline
\ \ edrel\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}i\ {\isasymRightarrow}\ i{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}edrel{\isacharparenleft}A{\isacharparenright}\ {\isacharequal}{\isacharequal}\ {\isacharbraceleft}{\isacharless}x{\isacharcomma}y{\isachargreater}\ {\isasymin}\ A{\isacharasterisk}A\ {\isachardot}\ x\ {\isasymin}\ domain{\isacharparenleft}y{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}
\end{isabelle}
%
Since \isa{edrel(A)} is a subset of a  well-founded relation (the
transitive closure of the membership relation restricted to \isa{A}),
then it is well-founded as well.

\begin{isabelle}
\isacommand{lemma}\isamarkupfalse%
\ edrel{\isacharunderscore}sub{\isacharunderscore}memrel{\isacharcolon}\ {\isachardoublequoteopen}edrel{\isacharparenleft}A{\isacharparenright}\ {\isasymsubseteq}\ trancl{\isacharparenleft}Memrel{\isacharparenleft}eclose{\isacharparenleft}A{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}
\end{isabelle}
\dots
\begin{isabelle}
\isacommand{lemma}\isamarkupfalse%
\ wf{\isacharunderscore}edrel\ {\isacharcolon}\ {\isachardoublequoteopen}wf{\isacharparenleft}edrel{\isacharparenleft}A{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
%
%
\isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}rule{\isacharunderscore}tac\ wf{\isacharunderscore}subset\ {\isacharbrackleft}of\ {\isachardoublequoteopen}trancl{\isacharparenleft}Memrel{\isacharparenleft}eclose{\isacharparenleft}A{\isacharparenright}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}{\isacharbrackright}{\isacharparenright}\isanewline
\ \ \isacommand{apply}\isamarkupfalse%
\ {\isacharparenleft}auto\ simp\ add{\isacharcolon}edrel{\isacharunderscore}sub{\isacharunderscore}memrel\ wf{\isacharunderscore}trancl\ wf{\isacharunderscore}Memrel{\isacharparenright}\isanewline
\ \ \isacommand{done}\isamarkupfalse%
%
\end{isabelle}

We now turn to the definition of $\val$.

\begin{isabelle}
\isacommand{definition}\isamarkupfalse%
\isanewline
\ \ Hv\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}i{\isasymRightarrow}i{\isasymRightarrow}i{\isasymRightarrow}i{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}Hv{\isacharparenleft}G{\isacharcomma}x{\isacharcomma}f{\isacharparenright}\ {\isacharequal}{\isacharequal}\ {\isacharbraceleft}\ f{\isacharbackquote}y\ {\isachardot}{\isachardot}\ y{\isasymin}\ domain{\isacharparenleft}x{\isacharparenright}{\isacharcomma}\ {\isasymexists}p{\isasymin}P{\isachardot}\ {\isacharless}y{\isacharcomma}p{\isachargreater}\ {\isasymin}\ x\ {\isasymand}\ p\ {\isasymin}\ G\ {\isacharbraceright}{\isachardoublequoteclose}\isanewline
\isanewline
\isacommand{definition}\isamarkupfalse%
\isanewline
\ \ val\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}i{\isasymRightarrow}i{\isasymRightarrow}i{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ {\isachardoublequoteopen}val{\isacharparenleft}G{\isacharcomma}{\isasymtau}{\isacharparenright}\ {\isacharequal}{\isacharequal}\ wfrec{\isacharparenleft}edrel{\isacharparenleft}eclose{\isacharparenleft}M{\isacharparenright}{\isacharparenright}{\isacharcomma}\ {\isasymtau}\ {\isacharcomma}Hv{\isacharparenleft}G{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}
\end{isabelle}

Then we can obtain the recursive expression~(\ref{eq:def-val}) in the
following lemma:
%
\begin{isabelle}
\isacommand{lemma}\isamarkupfalse%
\ def{\isacharunderscore}val{\isacharcolon}\ \ {\isachardoublequoteopen}x{\isasymin}M\ {\isasymLongrightarrow}\ val{\isacharparenleft}G{\isacharcomma}x{\isacharparenright}\ {\isacharequal}\ {\isacharbraceleft}val{\isacharparenleft}G{\isacharcomma}t{\isacharparenright}\ {\isachardot}{\isachardot}\ t{\isasymin}domain{\isacharparenleft}x{\isacharparenright}\ {\isacharcomma}\ {\isasymexists}p{\isasymin}P\ {\isachardot}\ \ {\isasymlangle}t{\isacharcomma}\ p{\isasymrangle}{\isasymin}x\ {\isasymand}\ p\ {\isasymin}\ G\ {\isacharbraceright}{\isachardoublequoteclose}
\end{isabelle}

%%% Local Variables:
%%% mode: latex
%%% ispell-local-dictionary: "american"
%%% TeX-master: "first_steps_into_forcing"
%%% End:
