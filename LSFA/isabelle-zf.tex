%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%-%
\subsection{Isabelle/ZF}

Let us introduce briefly Paulson's formalization of ZF
\cite{paulson2017isabelle} in Isabelle and aspects of his formal proof
for the relative consistency of the Axiom of Choice
\cite{paulson_2003}; we will only focus on those aspects that are
essential to keep this paper self-contained, and refer the interested
reader to Paulson's articles. 
%% Isabelle/ZF is a theory built upon the
%% core library FOL of classical first order logic.
Isabelle/ZF includes a development of classical first order logic,
FOL. Both of them are  built upon the core library \emph{Pure}. 

In Isabelle/ZF sets are \emph{individuals}, that is terms of type
\isatt{i} and formulas have type \isatt{o} 
(akin to a \emph{Bool} type, but at the object level). 
As in usual presentations
of ZF, Isabelle/ZF has only one relation symbol
\isatt{\ensuremath{\in}} (equality and inclusion are defined
using membership); it also features one constant \isatt{\isadigit{0}}
for the empty set and \isatt{inf} for an infinite set and some other
set constructors, again terms of type \isatt{i}, to ease the
developments. The axioms, being formulas, are terms of type \isatt{o};
the foundation axiom, for example, is formalized as:
\isa{{\isachardoublequoteopen}A\ {\isacharequal}\ {\isadigit{0}}\
  {\isasymor}%
  \ {\isacharparenleft}{\isasymexists}x{\isasymin}A{\isachardot}\ %
  {\isasymforall}y{\isasymin}x{\isachardot}\ %
  y{\isasymnotin}A{\isacharparenright}%
  {\isachardoublequoteclose}}. Besides the axioms, Isabelle/ZF also
introduces several definitions (for example, pairs and sets defined by
comprehension using separation) and syntactic abbreviations to keep
the formalization close to the customary manner of doing mathematics.
Working with the library and extendig it is quite
straightforward. 
As an example, we introduce  a new term-former which is combination of
instances of replacement and separation to speak of the image of a function over some set
defined by comprehension, namely $\{b(x): x\in A\text{ and }Q(x)\}$:
%% Since we find a need to combine the replacement and
%% separation schemes to speak of the image of a function over some set
%% defined by comprehension, we introduced a new term-former:
\begin{isabelle}
  \isacommand{definition}\isamarkupfalse%
  \ SepReplace\ {\isacharcolon}{\isacharcolon}\
  {\isachardoublequoteopen}{\isacharbrackleft}i{\isacharcomma}\
  i{\isasymRightarrow}i{\isacharcomma}\ i{\isasymRightarrow}\
  o{\isacharbrackright}\
  {\isasymRightarrow}i{\isachardoublequoteclose}\
  \isakeyword{where}\isanewline \ \
  {\isachardoublequoteopen}SepReplace{\isacharparenleft}A{\isacharcomma}b{\isacharcomma}Q{\isacharparenright}\
  {\isacharequal}{\isacharequal}\ {\isacharbraceleft}y\ {\isachardot}\
  x{\isasymin}A{\isacharcomma}\
  y{\isacharequal}b{\isacharparenleft}x{\isacharparenright}\
  {\isasymand}\
  Q{\isacharparenleft}x{\isacharparenright}{\isacharbraceright}{\isachardoublequoteclose}
\end{isabelle}
\noindent %% It is more convenient to add an abbreviation for a simpler
%% writing and a nicer reading, so we use
We are then able to add an abbreviation resembling the usual
mathematical writing by setting 
\isa{{\isacharbraceleft}b\
  {\isachardot}{\isachardot}\ x{\isasymin}A{\isacharcomma}\
  Q{\isacharbraceright}} as a notation for
\isa{SepReplace{\isacharparenleft}A{\isacharcomma}b{\isacharcomma}Q{\isacharparenright}}. The
characterization of our new constructor is given by
\begin{isabelle}
\isacommand{lemma}\isamarkupfalse%
\ Sep{\isacharunderscore}and{\isacharunderscore}Replace{\isacharcolon}\ {\isachardoublequoteopen}{\isacharbraceleft}b{\isacharparenleft}x{\isacharparenright}\ {\isachardot}{\isachardot}\ x{\isasymin}A{\isacharcomma}\ P{\isacharparenleft}x{\isacharparenright}\ {\isacharbraceright}\ {\isacharequal}\ {\isacharbraceleft}b{\isacharparenleft}x{\isacharparenright}\ {\isachardot}\ x{\isasymin}{\isacharbraceleft}y{\isasymin}A{\isachardot}\ P{\isacharparenleft}y{\isacharparenright}{\isacharbraceright}{\isacharbraceright}{\isachardoublequoteclose}
\end{isabelle}

We are not discussing how, if possible at all, to express that some
set satisfies some axiom. For example, we might well be interested in
proving $\emptyset \models \mathit{foundation}$, but there is no
sensible way to state this, without encoding formulas and axioms in
ZFC.\footnote{Indeed Paulson has encoded formulas using a very general
  method to encode recursive definitions. In our development, although
  not reported in this paper, we use this internalization.}

\fbox{ You need this in order to formalize $\models$ as a predicate of
  type $i\ent i \ent o$. (Don't know how to put that here.)
}

 In
Isabelle/ZF there are, however, relativized versions of the
axioms. This alternative statement of the axioms are relativized with
respect to classes, which in Isabelle/ZF corresponds to predicates over
sets. For example, the relativized axiom of foundation is:
\begin{isabelle}
\isacommand{definition}\isamarkupfalse%
\ foundation{\isacharunderscore}ax\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}i{\isacharequal}{\isachargreater}o{\isacharparenright}\ {\isacharequal}{\isachargreater}\ o{\isachardoublequoteclose}\ \isakeyword{where}\isanewline
\ \ \ \ {\isachardoublequoteopen}foundation{\isacharunderscore}ax{\isacharparenleft}M{\isacharparenright}\ {\isacharequal}{\isacharequal}\isanewline
\ \ \ \ \ \ \ \ {\isasymforall}x{\isacharbrackleft}M{\isacharbrackright}{\isachardot}\ {\isacharparenleft}{\isasymexists}y{\isacharbrackleft}M{\isacharbrackright}{\isachardot}\ y{\isasymin}x{\isacharparenright}\ {\isasymlongrightarrow}\ {\isacharparenleft}{\isasymexists}y{\isacharbrackleft}M{\isacharbrackright}{\isachardot}\ y{\isasymin}x\ {\isacharampersand}\ {\isachartilde}{\isacharparenleft}{\isasymexists}z{\isacharbrackleft}M{\isacharbrackright}{\isachardot}\ z{\isasymin}x\ {\isacharampersand}\ z\ {\isasymin}\ y{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}
\end{isabelle}

% âˆ€x[c]
\noindent The relativized quantifier
\isa{{\isasymforall}x{\isacharbrackleft}M{\isacharbrackright}{\isachardot}\
  P(x)} is a shorthand for \isa{{\isasymforall}x{\isachardot}\ M(x)
  {\isasymlongrightarrow} P(x)}. We are one step further to be able to
express that the empty set satisfies foundation; but we must turn the
set \isa{0 :: i} into a predicate. Isabelle/ZF provides the coercion
\isa{{\isacharhash}{\isacharhash} :: i ={\isachargreater} (i ={\isachargreater} o)}, thus we can write and prove:
\begin{isabelle}
\isacommand{lemma}\isamarkupfalse%
\ emp{\isacharunderscore}foundation\ {\isacharcolon}\ {\isachardoublequoteopen}foundation{\isacharunderscore}ax{\isacharparenleft}{\isacharhash}{\isacharhash}{\isadigit{0}}{\isacharparenright}{\isachardoublequoteclose}
\end{isabelle}


% Let us ponder if one can state, let alone prove, that some set \isa{M
%   :: i} satisfies a statement \isa{\ensuremath{\phi} :: o}. Since
% \isa{o} does not have an inductive definition, we cannot define the
% satisfaction of \isa{\ensuremath{\phi}}. 

% As we have outlined above, relativization is a key concept when
% proving that axioms satisfied by some model $M$ are also satisfied in
% another model constructed from $M$. In this paper, we show the complete
% proof that if a set \isa{M :: i} satisfies the 


% locales


%%% Local Variables:
%%% mode: latex
%%% ispell-local-dictionary: "american"
%%% TeX-master: "first_steps_into_forcing"
%%% End:
